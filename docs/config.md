# Конфигурация
Файл `config_default.ini` содержит основные параметры для репозитория.

Остальные конфигурационные файлы (локальные, в репозиторий они попадать не должны) могут
переопределять значения из `config_default.ini`.

По умолчанию в `makefile` путь к конфигурационному файлу, который переопределяет `config_default.ini`,
указан как `CONF=./config.ini`. Для того, чтобы запустить `make` с другим файлом, нужно выполнить:
```sh
make [target1 ...] CONF=my_config.ini
```

Работа к конфигом происходит через `tools/config.py`.

Чтобы сгенерировать `src/conf.h` (файл, через который в исходном коде можно обращаться к прошивке),
можно выполнить:
```sh
make conf
```

Цели `build`, `flash` и `ota` делают это автоматически.

В `config_default.ini` ещё закомментированные есть список всех секций и параметров для них,
подробнее см. в соотвествующих doc файлах.

## Секция `tools`
Содержит параметры, которые передаются инструментам на ПК.
На прошивку не влияют.

Подробнее см. [Инструменты](./tools.md).

## Секция `log`
Параметры прошивки для логов.

`tools/config.py` включает настройки логов в `src/conf.h`.

Подробнее см. [Инструменты](./logs.md).

## Модули
Остальные секции нужны для модулей `lib/` (имеют префикс `lib.`) и основной программы.

`tools/config.py` включает настройки модулей в `src/conf.h`.

Каждый модуль имеет параметр `enabled`, который отвечает за его включение в исходные коды прошивки
препроцессором.
Если секция модуля нигде не задана, то он считается выключеным, остальные поля принимают значения
по умолчанию в зависимости от их типа.
Некоторые модули требуют включение других.

Подробнее см. список в разделе Библиотека в [docs/README](./README.md).
