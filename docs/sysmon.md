# Sysmon (не использовать)
Позволяет получать такую информацию в реальном времени:
* количество занятой памяти в куче.
* нагрузку на каждое ядро и общая нагрузка на ЦП.
* список задач.

Для этого нужны:
1. хук на задачу безделия CPU0 (IDLE0, приоритет 0).
2. хук на задачу безделия CPU1 (IDLE1, приоритет 0).
3. задача сбора информации и вывод лога (приоритет 24 - максимальный).

## Конфигурация
В `config.ini` можно задавать следующие параметры:
```
[sysmon]
enabled=true
# Интервал работы задачи 3 в миллисекундах.
log_interval_ms=3333
# Если false, то мониторинг загрузки CPU отключен - хуков на IDLE0,1 нет.
monitor_cpu=true
# Включить/выключить мониторинг кучи.
monitor_heap=true
# Включить/выключить мониторинг задач. Рекомендую включать только для дебага
monitor_tasks=true
# false на случай если контроллер окажется одноядерным.
dualcore=true
```

Если `monitor_tasks || monitor_heap || monitor_cpu == false`, то задача лога информации не
запускается, хуки не навешиваются, всё остальное уберёт компилятор.

## API
Для использования нужно вызвать `sysmon_start()` только один раз.
Работу sysmon можно приостановить, а затем запустить заново функциями `sysmon_pause()` и
`sysmon_resume()`. `sysmon_dump_heap_stat()` чтобы вывести в лог информацию о куче, а 
`sysmon_dump_tasks()` - для вывода в лога задач.

