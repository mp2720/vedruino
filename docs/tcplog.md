# lib/tcp.h
Набор функций для работы с сокетами

## Подключиться 
Функция получает имя сервера и порт, пытается подключиться, и при успехе возвращает дескриптор сокета, который используется в дальнейшем, иначе возвращает -1.

Именем хоста может быть IP адрес или домен

Портом может быть число или название сервиса (см. /etc/services)
```C
int tcplog_connect(const char * host_name, const char * host_port);
```
## Закрыть
Получает сокет, и отключает его от сервера. Обязательно использовать перед перезаписью дескриптора сокета
```C
int tcplog_close(int socket);
```

## Отправить
Отправляет сообщение `payload` на данный сокет. В `len` нужно указать длинну сообщения в байтах, если это строка, то можно оставить `len` равным 0, тогда длина будет вычислена с помощью `strlen()`
```C
int tcplog_send(int socket, const char * payload, size_t len);
```

## tcp_printf()
Форматирует сообщение и отправляет на данный сокет.
```C
int tcplog_sock_printf(int socket, const char * format, ...);
```
Для отправки логов есть функция которая отправляет на сокет, указанный глобальной переменной `log_socket`. Для работы нужно подключить `log_socket` с помощью `tcp_connect()`, после чего приравнять `log_output` из `log.h` к `tcp_log_printf`.

```C
extern int log_socket;

int tcplog_printf(const char * format, ...);

```